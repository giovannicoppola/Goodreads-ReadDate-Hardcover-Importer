# Goodreads Read Date Importer for Hardcover

This repository contains tools for working with Goodreads data while importing to Hardcover.

## Tools

### 1. Goodreads Data Exporter (`parse_goodreads.py`)

This script downloads your Goodreads book data and exports it to a TSV (tab-separated values) file.

> **Important**: You must be logged into Goodreads in your browser before running this script. The script uses your browser's cookies to authenticate with Goodreads. If you're not logged in, the script will not be able to access your reading data.

#### Features

- Downloads your complete Goodreads reading history
- Exports data in TSV format
- Includes book titles, authors, dates, ratings, and page counts
- Optional cookie support for accessing private profiles

#### Usage

Basic usage:

```bash
python parse_goodreads.py YOUR_USER_ID
```

For example:

```bash
python parse_goodreads.py 38810427-giovanni
```

### 2. Hardcover Sync Tool (`sync_hardcover.py`)

This script syncs your Goodreads reading dates with your Hardcover account.

#### Features

- Reads the TSV file generated by the Goodreads exporter
- Finds matching books on Hardcover using Goodreads IDs
- Updates reading dates on Hardcover to match your Goodreads data
- Handles multiple reading journeys by matching the finished date
- Option to limit the number of books processed (useful for testing)
- Generates detailed log files for troubleshooting

#### Prerequisites

1. A Hardcover account
2. An API key from Hardcover
3. The TSV file generated by `parse_goodreads.py`

#### Getting Your Hardcover API Key

1. Log in to your Hardcover account
2. Go to your account settings
3. Generate an API key
4. Save it in `hardcover_api_key.json`:
   ```json
   {
     "api_key": "your_api_key_here"
   }
   ```

#### Usage

Basic usage:

```bash
python sync_hardcover.py books.tsv
```

Test mode (process only a few books):

```bash
python sync_hardcover.py books.tsv --limit=5
```

Generate a log file:

```bash
python sync_hardcover.py books.tsv --log
```

The script will:

1. Read your API key from `hardcover_api_key.json`
2. Process each book in the TSV file (or up to the specified limit)
3. Find matching books on Hardcover
4. If multiple reading journeys exist, it will select the one with a matching finished date
5. Update the reading dates

#### Logging

The script can generate a detailed log file (`log.txt`) that contains:

- Start and end timestamps
- All operations performed
- Success and error messages
- API responses and errors
- Summary of books processed and updated

To generate a log file, use the `--log` option:

```bash
python sync_hardcover.py books.tsv --log
```

The log file is useful for:

- Troubleshooting issues
- Keeping a record of changes made
- Debugging API errors
- Verifying the script's behavior

#### Multiple Read Dates

If a book has multiple reading dates on Hardcover:

- The script will look for a journey with a matching finished date
- If a matching finished date is found, that journey will be updated
- If no matching finished date is found, the first journey will be used
- The script will print a warning when multiple journeys are found

> **Important**: I have not tested the case of multiple read dates on GR.

#### Testing the Script

If you're unsure about running the script on your entire library:

1. Use the `--limit` option to process only a few books first
2. Check the results in your Hardcover account
3. If everything looks good, run the script without the limit to process all books

Example:

```bash
# Test with 5 books first
python sync_hardcover.py books.tsv --limit=5

# If everything looks good, process all books
python sync_hardcover.py books.tsv
```

## Installation

1. Make sure you have Python 3.6 or later installed
2. Install the required packages:
   ```bash
   pip install -r requirements.txt
   ```

## Finding Your Goodreads User ID

1. Log in to your Goodreads account
2. Go to your profile page
3. Look at the URL - it should look like: `https://www.goodreads.com/user/show/1234567-username`
4. Your user ID is the "1234567-username" part

## Optional: Using Cookies for Private Profiles

If your Goodreads profile is private, you can use cookies to access it. Here are two methods to export cookies:

### Method 1: Using Browser Developer Tools

1. Log in to Goodreads in your browser
2. Open Developer Tools:
   - Chrome/Edge: Press `F12` or right-click and select "Inspect"
   - Firefox: Press `F12` or right-click and select "Inspect Element"
   - Safari: Enable Developer menu in Preferences > Advanced, then select "Show Web Inspector"
3. Go to the "Application" tab (Chrome/Edge) or "Storage" tab (Firefox)
4. In the left sidebar, expand "Cookies" and select "https://www.goodreads.com"
5. Select all cookies (you can use Ctrl+A or Cmd+A)
6. Right-click and select "Copy" or "Export"
7. Save all cookies in a file named `cookies.json` in the same directory as the script

### Method 2: Using Cookie Editor Extension

1. Install the [Cookie Editor](https://chrome.google.com/webstore/detail/cookie-editor/hlkenndednhfkekhgcdicdfddnkalmdm) extension for Chrome/Edge or [Cookie Editor](https://addons.mozilla.org/en-US/firefox/addon/cookie-editor/) for Firefox
2. Log in to Goodreads in your browser
3. Click the Cookie Editor extension icon
4. Click "Export" and select "JSON" format
5. Save all exported cookies in a file named `cookies.json` in the same directory as the script

### Important Notes

- You must export ALL cookies from Goodreads, not just a single cookie
- Keep your cookies file secure and never share it
- Cookies expire after some time, so you may need to export them again if the script stops working
- The script will automatically use these cookies if the `cookies.json` file is present

## Output Format

The Goodreads exporter creates a TSV file with the following columns:

- Goodreads ID
- Book Title
- Date Started
- Date Read
- Author
- Average Rating
- Number of Pages

## Troubleshooting

### Goodreads Exporter

If you encounter a 403 Forbidden error:

1. Make sure your user ID is correct
2. If your profile is private, try using cookies
3. Check if Goodreads is blocking automated access (you might need to wait a while)

### Hardcover Sync

If books aren't being found on Hardcover:

1. Make sure your API key is correct
2. Check if the books exist in your Hardcover library
3. Verify that the Goodreads IDs match between Goodreads and Hardcover

## License

These scripts are provided as-is under the MIT License.

## Acknowledgments

- Cursor AI
- Hardcover authors and Discord server
